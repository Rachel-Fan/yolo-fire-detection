def remove_null_bytes(file_path):
    with open(file_path, 'rb') as file:
        content = file.read()

    # Remove null bytes
    cleaned_content = content.replace(b'\x00', b'')

    with open(file_path, 'wb') as file:
        file.write(cleaned_content)

    print(f"Null bytes removed from {file_path}")
    
def fix_encoding(file_path):
    with open(file_path, 'rb') as file:
        content = file.read()

    # Remove BOM or invalid bytes
    cleaned_content = content.replace(b'\xef\xbb\xbf', b'').replace(b'\xff\xfe', b'').replace(b'\xfe\xff', b'')

    try:
        decoded_content = cleaned_content.decode('utf-8')
    except UnicodeDecodeError as e:
        print(f"UnicodeDecodeError: {e}")
        decoded_content = cleaned_content.decode('utf-8', errors='ignore')
        print("Decoding with errors ignored.")

    with open(file_path, 'w', encoding='utf-8') as file:
        file.write(decoded_content)

    print(f"Encoding fixed for {file_path}")

if __name__ == "__main__":
    file_path = 'ui/home.py'
    remove_null_bytes(file_path)
    fix_encoding(file_path)
